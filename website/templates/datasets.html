{% extends 'base.html' %}

{% block title %}Datasets{% endblock %}

{% block content %}

<link href="{{ url_for('static', filename='datasets.css') }}" rel="stylesheet" />

<div class="table-container">
  
  <!-- Flash messages section -->
  <div class="container">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flashes">
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
  </div>

  <button type="button" style="margin-left: 65%;" onclick="window.location.href=`{{ url_for('add_dataset', machine_id=machine_id) }}`;" class="buttonFilled">Add Dataset</button>
  {% if not datasetsArray %}
    <h1>No Datasets for now, let's get started! ↗️</h1>
  {% else %}
  <table class="machine-table">
    <thead>
      <tr>
        <th>Dataset Name</th>
        <th>Status</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    {% for datasetDict in datasetsArray %}
    <tbody>
      <tr>
        <td>{{ datasetDict['dataset_name'] }}</td>
        <td>{{ datasetDict['status'] }}</td>
        <td>
          <button style="width: 100%;" type="button" onclick="window.location.href=`{{ url_for('train', machine_id=machine_id, dataset_id=datasetDict['dataset_id']) }}`;" class="buttonFilled">Train</button>
        </td>
        <td>
          <button style="width: 100%;" type="button" onclick="window.location.href=`{{ url_for('list_models', machine_id=machine_id, dataset_id=datasetDict['dataset_id']) }}`;" class="buttonFilled">Models</button>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>

{% endblock %}